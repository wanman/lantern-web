doctype html
html(lang="en")
    head
        title=title
        meta(charset="utf-8")
        meta(name="viewport" content="width=device-width, initial-scale=1")
        meta(name="description" content="Offline First Applications")
        link(rel="/media/favicon/apple-touch-icon", sizes="180x180", href="/apple-touch-icon.png")
        link(rel="icon", type="image/png", sizes="32x32", href="/media/favicon/favicon-32x32.png")
        link(rel="icon", type="image/png", sizes="16x16", href="/media/favicon/favicon-16x16.png")
        link(rel="mask-icon", href="/media/favicon/safari-pinned-tab.svg", color="#5bbad5")
        meta(name="msapplication-TileColor", content="#da532c")
        meta(name="theme-color", content="#ffffff")
        meta(name="apple-mobile-web-app-capable" content="yes")
        link(rel="manifest" href="/manifest.json")
        link(rel="stylesheet" type="text/css" href="/lib/lantern.css")
        link(rel="stylesheet" type="text/css" href="/media/icons/css/fontawesome-all.css")
        block styles

    body
        div(id=id+"-page")
            
            // global navigation
            nav.navbar.is-fixed-top(v-cloak role="navigation" aria-label="main navigation" v-bind:class="[showNavMenu ? 'is-active' : 'is-inactive']" )
                .navbar-brand

                    a.navbar-burger(v-if="!allow_back_button" role="button" aria-label="menu" v-bind:aria-expanded="[showNavMenu ? true : false]"  @click="toggleNavigation" v-bind:class="[showNavMenu ? 'is-active' : 'is-inactive']" )
                        span(aria-hidden="true")
                        span(aria-hidden="true")
                        span(aria-hidden="true")

                    #back-btn(v-if="allow_back_button" @click="handleGoBack" role="button")
                        span.icon.is-medium
                            i.fas.fa-arrow-left.fa-md

                    .navbar-item
                        span {{ page_title }}

                        .tags(v-if="page_tag")
                            .tag {{ page_tag }}
                   

            nav.navbar.is-fixed-bottom#status-footer(v-cloak v-if="cloud_connected !== null || lantern_connected !== null" v-bind:class="is_syncing ? 'is-syncing' : ''")
                .navbar-brand
                    .navbar-item(v-if="is_syncing")
                        span.icon
                            i.fas.fa-sync
                        
                        span(v-if="is_syncing === true") Syncing
                        span(v-if="is_syncing !== true") Syncing {{ is_syncing }}

                    .navbar-item(v-if="!is_syncing")
                        span(v-if="!cloud_connected && !lantern_connected") 

                            span.icon
                                    i.fas.fa-wifi(style="color: #DDD")
                            | Offline

                        span(v-if="cloud_connected") 
                            span.icon
                                    i.fas.fa-cloud
                            | Online
                        span(v-if="lantern_connected") 
                            span.icon
                                    i.fas.fa-wifi
                            | Lantern X12


            section
                nav.global(v-if="showNavMenu" v-cloak)
                    ul
                        li
                            a(href="/index.html") 
                                span.icon
                                    i.fas.fa-home
                                | Home

                        li
                            a(href="/browse/browse.html") 
                                span.icon
                                    i.fas.fa-map
                                | Places
                       
                        li
                            a(href="/checkin/checkin.html") 
                                span.icon
                                    i.fas.fa-check
                                | Check In
                       
                        li
                            a(href="/add/add.html") 
                                span.icon
                                    i.fas.fa-plus-circle
                                | Contribute
                        li
                            a(href="/admin/admin.html") 
                                span.icon
                                    i.fas.fa-database
                                | Admin

                        li.user-count
                            span(v-if="u_docs.length") 
                                span.icon
                                        i.fas.fa-user
                                | {{ pluralize(u_docs.length-1) }} Active


                // main page content
                .page-content
                    block content

            script(src="/lib/vendor.js")
            script(src="/lib/lantern.js")
            block scripts